# Zero-Trust Domain Controller Environment Configuration
# Copy this file to .env and customize for your environment

# ============================================================================
# Domain Configuration
# ============================================================================
DOMAIN_NAME=example.com
DOMAIN_REALM=EXAMPLE.COM
BASE_DN=dc=example,dc=com
ORGANIZATION=Example Organization

# ============================================================================
# Application Settings
# ============================================================================
DEBUG=false
HOST=0.0.0.0
PORT=8443
WORKERS=4
LOG_LEVEL=INFO
JSON_LOGS=true

# ============================================================================
# Database Configuration
# ============================================================================
POSTGRES_PASSWORD=changeme-secure-password-here
DATABASE_URL=postgresql://ztdc:changeme-secure-password-here@postgres:5432/ztdc
DB_POOL_SIZE=20
DB_MAX_OVERFLOW=10

# ============================================================================
# Redis Configuration
# ============================================================================
REDIS_PASSWORD=changeme-secure-password-here
REDIS_URL=redis://:changeme-secure-password-here@redis:6379/0
REDIS_SESSION_TTL=3600
REDIS_CACHE_TTL=300

# ============================================================================
# Security Keys (MUST BE GENERATED UNIQUELY)
# Generate with: python -c "import secrets; print(secrets.token_urlsafe(32))"
# ============================================================================
JWT_SECRET_KEY=GENERATE-SECURE-RANDOM-KEY-HERE
ENCRYPTION_KEY=GENERATE-SECURE-RANDOM-KEY-HERE
CA_PASSPHRASE=GENERATE-SECURE-PASSPHRASE-HERE

# ============================================================================
# JWT Configuration
# ============================================================================
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRE=900
JWT_REFRESH_TOKEN_EXPIRE=604800

# ============================================================================
# Password Policy
# ============================================================================
PASSWORD_MIN_LENGTH=12
PASSWORD_REQUIRE_SPECIAL=true
PASSWORD_REQUIRE_DIGITS=true
PASSWORD_REQUIRE_UPPERCASE=true

# ============================================================================
# TLS/SSL Configuration
# ============================================================================
USE_TLS=true
CERT_DIR=/app/certs
CA_CERT_FILE=ca.crt
CA_KEY_FILE=ca.key
SERVER_CERT_FILE=server.crt
SERVER_KEY_FILE=server.key
CERT_VALIDITY_DAYS=365
AUTO_INIT_CA=true

# ============================================================================
# Identity Provider
# ============================================================================
OIDC_ENABLED=true
SAML_ENABLED=true
OAUTH2_ENABLED=true
OIDC_ISSUER=https://example.com

# ============================================================================
# Zero-Trust Configuration
# ============================================================================
MTLS_REQUIRED=true
DEVICE_TRUST_REQUIRED=true
CONTINUOUS_AUTH_INTERVAL=3600
MAX_SESSION_AGE=28800
SESSION_INACTIVITY_TIMEOUT=1800
RISK_SCORE_THRESHOLD=0.7

# ============================================================================
# Multi-Factor Authentication
# ============================================================================
MFA_REQUIRED=true
TOTP_ENABLED=true
TOTP_ISSUER=Example Organization
WEBAUTHN_ENABLED=true
WEBAUTHN_RP_NAME=Zero-Trust DC
SMS_MFA_ENABLED=false

# ============================================================================
# Policy Engine
# ============================================================================
POLICY_ENGINE=internal
OPA_URL=
DEFAULT_POLICY=deny
POLICY_CACHE_TTL=300

# ============================================================================
# LDAP Configuration
# ============================================================================
LDAP_ENABLED=true
LDAP_PORT=389
LDAPS_PORT=636

# ============================================================================
# Rate Limiting
# ============================================================================
RATE_LIMIT_ENABLED=true
RATE_LIMIT_PER_MINUTE=60
RATE_LIMIT_PER_HOUR=1000

# ============================================================================
# CORS Configuration
# ============================================================================
ALLOWED_ORIGINS=*
ALLOWED_HOSTS=*

# ============================================================================
# Monitoring
# ============================================================================
PROMETHEUS_ENABLED=true
METRICS_PORT=9443
ENABLE_REQUEST_METRICS=true

# ============================================================================
# Audit Logging
# ============================================================================
AUDIT_LOG_ENABLED=true
AUDIT_LOG_FILE=/app/logs/audit.log
AUDIT_LOG_RETENTION_DAYS=90

# ============================================================================
# Feature Flags
# ============================================================================
ENABLE_PASSWORD_RESET=true
ENABLE_USER_REGISTRATION=false
ENABLE_DEVICE_ENROLLMENT=true
ENABLE_RISK_SCORING=true

# ============================================================================
# Grafana (for monitoring stack)
# ============================================================================
GRAFANA_PASSWORD=admin-change-this